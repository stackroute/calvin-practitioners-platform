<div fxLayout="row" fxLayoutAlign="start stretch" fxFlex="100" fxLayoutWrap>
  <div fxLayout="column" fxFlex="10"></div>
  <form class="container" fxFlex="80" fxLayout="column" 
  fxFlexFill [formGroup]="userForm" (ngSubmit)="onsubmit(userForm)">
  <h3 class="md-headline">Create a community</h3>
<!--domain name text field-->
    <div class="inputFields" fxLayout.md="column">
      <md-input-container>
        
        <input mdInput placeholder="Domain name" formControlName="domainName" (change)="isDomainUnique(userForm.get('domainName'))">
        <md-hint align="start" class="full-width">        
          <div *ngIf="userForm.get('domainName').hasError('required') && userForm.get('domainName').touched" class="errorStyle">
            Domain Name is required
          </div>
          <div *ngIf="userForm.get('domainName').hasError('pattern') && userForm.get('domainName')" class="errorStyle">
            Invalid DomainName,must contain 8 to 20 char with one special character(.)
          </div>
        </md-hint>
      </md-input-container>
      <div *ngIf="flag===1" fxLayoutAlign="center center">
        <div *ngIf="isDomainExists === false" ><i class="material-icons" style="color: green">check_circle</i>Domainname available</div>
        <div *ngIf="isDomainExists === true" ><i class="material-icons" style="color: red">close</i>Domainname already exists. Try another.</div>
        <!--<small >Domain {{ isDomainExists ? " exists already " : " available " }}</small>-->
      </div>
    </div>
  <!--community text field-->
  <div class="inputFields" fxLayout.md="column">
    <md-input-container>
      <input mdInput placeholder="Community name" class="communityNameFont" formControlName="name">
      <md-hint align="start" class="full-width">
        <div *ngIf="userForm.get('name').hasError('required') && userForm.get('name').touched">
          Community Name is required
        </div>
      </md-hint>
    </md-input-container>
  </div>
  <!--Avatar-->
  <div class="inputFields" fxLayout.md="column">
    <md-input-container>
      <input mdInput placeholder="Avatar" formControlName="avatar">
      <md-hint align="start" class="full-width">
        <div *ngIf="userForm.get('avatar').hasError('pattern') && userForm.get('avatar').touched" class="errorStyle">
            Invalid avatar path,must be url
          </div>
        </md-hint>
    </md-input-container>
  </div>
  <!--choose visibitity mode-->
  <div class="inputFields" fxLayout.md="column" fxLayoutGap="100px">
    <md-input-container>
      <input mdInput placeholder="Visibility" disabled >
      <md-radio-group name="visibility" formControlName="visibility" > 
        <!--[(ngModel)]="visibility">-->
        <md-radio-button value="Public" >Public <div fxFlex="70%" class="visibilityDesc">Visible to anyone anywhere </div></md-radio-button>
        <md-radio-button value="Private" >Private <div fxFlex="70%" class="visibilityDesc">Visible only to you</div> </md-radio-button>
        <md-radio-button value="Moderated" >Moderated <div fxFlex="70%" class="visibilityDesc">Only invited members can join and see community content </div></md-radio-button>
      </md-radio-group>
    </md-input-container>
  </div>
  <!--<div fxLayout.md="column" ng-disabled="!visibility.value === 'Public' || 'Private' || 'Moderated''">
  <div  *ngIf="visibility === 'Public'">Visible to anyone anywhere</div>
  <div   *ngIf="visibility === 'Private'">Visible only you</div>
  <div   *ngIf="visibility === 'Moderated'">Only invited members can join and see community content</div>
  </div>-->
  <!--get description from user using text-area -->
  <md-input-container class="inputFields" >
    <textarea mdInput class="communityNameFont" placeholder="Description" rows="2" formControlName="description"></textarea>
  </md-input-container>
  <!--select core-activity-->
  <div class="inputFields"  fxLayout.md="row" fxLayoutAlign="start end"   fxLayoutGap="20%">
    <div fxLayout.md="column">
      <div>
        <md-select placeholder="Select purpose" formControlName="purpose">
          <md-option *ngFor="let core of uniquePurposeArry" (click)="selectTemplate(core)" [value]="core">
          {{core}}
          </md-option>
        </md-select>
        <md-hint align="start" >
          <div *ngIf="userForm.get('purpose').hasError('required') && userForm.get('purpose').touched" class="errorStyle">
            Select purpose
          </div>
        </md-hint>
      </div>
    </div>
    <!--select template -->
    <div fxLayout.md="column">
      <div>
        <calvin-template-browser (notify)="onselect($event)"  [template]="this.uniqueTemplate" (onselect)="onselect($event)">
        </calvin-template-browser>
      </div>
    </div>
  </div>
  <!--</span>-->
  <!--select tag container-->
  <div class="inputFields" fxLayout.md="row">
  <div fxLayout.md="column">
    <md-input-container>
      <input mdInput placeholder="Specify tag" [(ngModel)]="tagname" #resetText  formControlName="tagCtrl">
      <md-hint align="start" class="full-width">        
          <div *ngIf="userForm.get('tagCtrl').hasError('required') && userForm.get('tagCtrl').touched" class="errorStyle">
            Tag is required
          </div>
          <div *ngIf="userForm.get('tagCtrl').hasError('pattern') && userForm.get('tagCtrl')" class="errorStyle">
            Invalid tag length,must contain 3 to 20 char with one special character(.)
          </div>
      </md-hint>
    </md-input-container>
  </div>
  <div fxLayout.md="column" fxLayoutAlign="center center">
    <a md-button (click)="chipValue(tagname,resetText)">Add</a> 
  </div>
  </div>
  <md-chip-list>
    <div fxLayout.md="column" ng-disabled="!tag.value" *ngFor="let tag of tagarray" >
      <md-chip>{{tag}}<i class="material-icons" (click)="deselectchip(tag)">clear</i></md-chip>
    </div>
  </md-chip-list>
  <!--terms and condition-->
  <div class="inputFields" fxLayout.md="row">
    <md-checkbox color="primary" formControlName="termscondition">I agree to the terms and condition.</md-checkbox>
  </div>
  <!--submit the form using raised button-->
  <div fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="5px">
    <a md-button (click)="routeToHome()">Cancel</a>
    <button md-raised-button type="submit" color="primary" [disabled]="!userForm.valid">Submit</button>
  </div>
  </form>
  <div fxLayout="column" fxFlex="10"></div>
</div>

<router-outlet></router-outlet>